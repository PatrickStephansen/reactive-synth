!function(e){var t={};function s(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="./assets/audio-worklet-processors",s(s.s=1)}([function(e,t,s){"use strict";s.d(t,"a",function(){return a});const a=(e,t,s)=>a=>{const i=((e,t)=>s=>s<e?e:s>t?t:s)(t,s);return e.length>1?i(e[a]):i(e[0])}},function(e,t,s){s(2),s(5),s(3),s(4),e.exports=s(6)},function(e,t,s){"use strict";s.r(t);const a=s(0).a,i=(e,t,s)=>{const a=Math.random()*(s-t)+t;return Math.random()>.5?e+a>1?e-a:e+a:e-a<-1?e+a:e-a};registerProcessor("noise",class extends AudioWorkletProcessor{static get parameterDescriptors(){return[{name:"stepMax",defaultValue:1,minValue:0,maxValue:1,automationRate:"a-rate"},{name:"stepMin",defaultValue:0,minValue:0,maxValue:1,automationRate:"a-rate"},{name:"sampleHold",defaultValue:1,minValue:0,maxValue:1e6,automationRate:"a-rate"},{name:"nextValueTrigger",defaultValue:0,automationRate:"a-rate"}]}constructor(){super(),this.previousValue=.1,this.samplesHeld=0,this.isTriggerValueHigh=!1,this.port.onmessage=this.handleMessage.bind(this),this.manualTriggerOn=!1,this.triggerChangeMessage={type:"trigger-change",value:!1}}handleMessage(e){e.data&&"manual-trigger"===e.data.type&&(this.manualTriggerOn=e.data.value)}process(e,t,s){let n=t[0];this.getStepMin=a(s.stepMin,0,1),this.getStepMax=a(s.stepMax,0,1),this.getSampleHold=a(s.sampleHold,0,1e6),this.getNextValueTrigger=this.manualTriggerOn?()=>1e9:a(s.nextValueTrigger,0,1);for(let e=0;e<n[0].length;++e,++this.samplesHeld){this.samplesHeld<0&&(this.samplesHeld=0);const t=this.getSampleHold(e);t>=1&&this.samplesHeld>=t&&(this.samplesHeld-=t,this.previousValue=i(this.previousValue,this.getStepMin(e),this.getStepMax(e)));const s=this.getNextValueTrigger(e);this.isTriggerValueHigh!=s>0&&(this.triggerChangeMessage.value=s>0,this.port.postMessage(this.triggerChangeMessage)),!this.isTriggerValueHigh&&s>0&&(this.previousValue=i(this.previousValue,this.getStepMin(e),this.getStepMax(e))),this.isTriggerValueHigh=s>0;for(let t=0;t<n.length;++t)n[t][e]=this.previousValue}return!0}})},function(e,t,s){"use strict";s.r(t);const a=s(0).a;registerProcessor("inverse-gain",class extends AudioWorkletProcessor{static get parameterDescriptors(){return[{name:"divisor",defaultValue:10,automationRate:"a-rate"},{name:"zeroDivisorFallback",defaultValue:0,automationRate:"a-rate"}]}process(e,t,s){let i=e[0],n=t[0];this.getDivisor=a(s.divisor,-1e9,1e9),this.getZeroDivisorOutput=a(s.zeroDivisorFallback,-1e9,1e9);for(let e=0;e<i.length;e++){const t=i[e],s=n[e];for(let e=0;e<t.length;e++){const a=t[e],i=this.getDivisor(e);s[e]=0===i?this.getZeroDivisorOutput(e):a/i}}return!0}})},function(e,t,s){"use strict";s.r(t);var a=s(0);const i=(e,t,{attackTime:s,attackValue:a,holdTime:i,decayTime:n,sustainValue:r,releaseTime:o},g,u,c,l,h={})=>{const d=1/t;return h.stage=u,h.secondsSinceStateTransition=void 0,h.stageProgress=0,h.valueOnTriggerChange=void 0,h.outputValue=void 0,0===u&&(c<=0?(h.stage=0,h.secondsSinceStateTransition=g+d,h.outputValue=0):d<s?(h.stage=1,h.secondsSinceStateTransition=d,h.stageProgress=h.secondsSinceStateTransition/s,h.valueOnTriggerChange=0,h.outputValue=e(0,0,a,s,h.secondsSinceStateTransition)):d-s<i?(h.stage=2,h.secondsSinceStateTransition=d-s,h.stageProgress=h.secondsSinceStateTransition/i,h.outputValue=a):d-s-i<n?(h.stage=3,h.secondsSinceStateTransition=d-s-i,h.stageProgress=h.secondsSinceStateTransition/n,h.outputValue=e(a,0,r,n,h.secondsSinceStateTransition)):(h.stage=4,h.secondsSinceStateTransition=d-s-i-n,h.outputValue=r)),1===u&&(c<=0?d<o?(h.stage=5,h.secondsSinceStateTransition=d,h.stageProgress=h.secondsSinceStateTransition/o,h.valueOnTriggerChange=g<s?e(l||0,0,a,s,g):g-s<i?a:g-s-i<n?e(a,0,r,n,g-s-i):r,h.outputValue=e(h.valueOnTriggerChange,0,0,o,h.secondsSinceStateTransition)):(h.stage=0,h.secondsSinceStateTransition=d-o,h.outputValue=0):g+d<s?(h.stage=1,h.secondsSinceStateTransition=g+d,h.stageProgress=h.secondsSinceStateTransition/s,h.valueOnTriggerChange=l,h.outputValue=e(l||0,0,a,s,h.secondsSinceStateTransition)):g+d-s<i?(h.stage=2,h.secondsSinceStateTransition=g+d-s,h.stageProgress=h.secondsSinceStateTransition/i,h.outputValue=a):g+d-s-i<n?(h.stage=3,h.secondsSinceStateTransition=g+d-s-i,h.stageProgress=h.secondsSinceStateTransition/n,h.outputValue=e(a,0,r,n,h.secondsSinceStateTransition)):(h.stage=4,h.secondsSinceStateTransition=g+d-s-i-n,h.outputValue=r)),2===u&&(c<=0?d<o?(h.stage=5,h.secondsSinceStateTransition=d,h.stageProgress=h.secondsSinceStateTransition/o,h.valueOnTriggerChange=g<i?a:g-i<n?e(a,0,r,n,g-i):r,h.outputValue=e(h.valueOnTriggerChange,0,0,o,h.secondsSinceStateTransition)):(h.stage=0,h.secondsSinceStateTransition=d-o,h.outputValue=0):g+d<i?(h.stage=2,h.secondsSinceStateTransition=g+d,h.stageProgress=h.secondsSinceStateTransition/i,h.outputValue=a):g+d-i<n?(h.stage=3,h.secondsSinceStateTransition=g+d-i,h.stageProgress=h.secondsSinceStateTransition/n,h.outputValue=e(a,0,r,n,h.secondsSinceStateTransition)):(h.stage=4,h.secondsSinceStateTransition=g+d-i-n,h.outputValue=r)),3===u&&(c<=0?d<o?(h.stage=5,h.secondsSinceStateTransition=d,h.stageProgress=h.secondsSinceStateTransition/o,h.valueOnTriggerChange=g<n?e(a,0,r,n,g):r,h.outputValue=e(h.valueOnTriggerChange,0,0,o,h.secondsSinceStateTransition)):(h.stage=0,h.secondsSinceStateTransition=d-o,h.outputValue=0):g+d<n?(h.stage=3,h.secondsSinceStateTransition=g+d,h.stageProgress=h.secondsSinceStateTransition/n,h.outputValue=e(a,0,r,n,h.secondsSinceStateTransition)):(h.stage=4,h.secondsSinceStateTransition=g+d-n,h.outputValue=r)),4===u&&(c<=0?d<o?(h.stage=5,h.secondsSinceStateTransition=d,h.stageProgress=h.secondsSinceStateTransition/o,h.valueOnTriggerChange=r,h.outputValue=e(h.valueOnTriggerChange,0,0,o,h.secondsSinceStateTransition)):(h.stage=0,h.secondsSinceStateTransition=d-o,h.outputValue=0):(h.stage=4,h.secondsSinceStateTransition=g+d,h.outputValue=r)),5===u&&(c<=0?g+d<o?(h.stage=5,h.secondsSinceStateTransition=g+d,h.stageProgress=h.secondsSinceStateTransition/o,h.valueOnTriggerChange=l,h.outputValue=e(h.valueOnTriggerChange,0,0,o,h.secondsSinceStateTransition)):(h.stage=0,h.secondsSinceStateTransition=g+d-o,h.outputValue=0):d<s?(h.stage=1,h.secondsSinceStateTransition=d,h.stageProgress=h.secondsSinceStateTransition/s,h.valueOnTriggerChange=e(l||0,0,0,o,g),h.outputValue=e(h.valueOnTriggerChange,0,a,s,h.secondsSinceStateTransition)):d-s<i?(h.stage=2,h.secondsSinceStateTransition=d-s,h.stageProgress=h.secondsSinceStateTransition/i,h.outputValue=a):d-s-i<n?(h.stage=3,h.secondsSinceStateTransition=d-s-i,h.stageProgress=h.secondsSinceStateTransition/n,h.outputValue=e(a,0,r,n,h.secondsSinceStateTransition)):(h.stage=4,h.secondsSinceStateTransition=d-s-i-n,h.outputValue=r)),h};function n(e,t,s,a,i){if(t>=a&&(t=a),i>=a)return s;if(i<=t)return e;return e+(i-t)*((s-e)/(a-t))}const r=a.a;registerProcessor("envelope-generator",class extends AudioWorkletProcessor{static get parameterDescriptors(){return[{name:"trigger",defaultValue:0,automationRate:"a-rate"},{name:"attackValue",defaultValue:1,minValue:0,maxValue:1,automationRate:"a-rate"},{name:"attackTime",defaultValue:.001,minValue:0,maxValue:10,automationRate:"a-rate"},{name:"holdTime",minValue:0,defaultValue:.0625,maxValue:10,automationRate:"a-rate"},{name:"decayTime",defaultValue:.125,minValue:0,maxValue:10,automationRate:"a-rate"},{name:"sustainValue",defaultValue:.25,minValue:0,maxValue:1,automationRate:"a-rate"},{name:"releaseTime",defaultValue:.25,minValue:0,maxValue:10}]}constructor(e){super(e),this.stage=0,this.stageProgress=0,this.secondsSinceStateTransition=0,this.port.onmessage=this.handleMessage.bind(this),this.state={attackTime:.001,attackValue:1,holdTime:.0625,decayTime:.125,sustainValue:.25,releaseTime:.25},this.sampleRate=e.sampleRate||44100,this.outputValue=0,this.valueOnTriggerChange=void 0,this.manualTriggerOn=!1,this.previousTriggerValue=0,this.stateMessage={type:"state",state:{stage:this.stage,stageProgress:this.stageProgress,outputValue:this.outputValue}},this.triggerChangeMessage={type:"trigger-change",value:!1},this.outputCache={stage:void 0,secondsSinceStateTransition:void 0,stageProgress:0,valueOnTriggerChange:void 0,outputValue:void 0}}handleMessage(e){e.data&&"getState"===e.data.type&&(this.stateMessage.state.stage=this.stage,this.stateMessage.state.stageProgress=this.stageProgress,this.stateMessage.state.outputValue=this.outputValue,this.port.postMessage(this.stateMessage)),e.data&&"manual-trigger"===e.data.type&&(this.manualTriggerOn=e.data.value)}process(e,t,s){let a=t[0];this.getTriggerValue=this.manualTriggerOn?()=>1e9:r(s.trigger,-1e9,1e9),this.getAttackTime=r(s.attackTime,0,10),this.getAttackValue=r(s.attackValue,0,1),this.getHoldTime=r(s.holdTime,0,10),this.getDecayTime=r(s.decayTime,0,10),this.getSustainValue=r(s.sustainValue,0,1),this.getReleaseTime=r(s.releaseTime,0,10);for(let e=0;e<a[0].length;e++){this.state.attackTime=this.getAttackTime(e),this.state.attackValue=this.getAttackValue(e),this.state.holdTime=this.getHoldTime(e),this.state.decayTime=this.getDecayTime(e),this.state.sustainValue=this.getSustainValue(e),this.state.releaseTime=this.getReleaseTime(e);const t=this.getTriggerValue(e);t>0!=this.previousTriggerValue>0&&(this.triggerChangeMessage.value=t>0,this.port.postMessage(this.triggerChangeMessage)),i(n,this.sampleRate,this.state,this.secondsSinceStateTransition,this.stage,t,this.valueOnTriggerChange,this.outputCache),this.stage=this.outputCache.stage,this.stageProgress=this.outputCache.stageProgress,this.secondsSinceStateTransition=this.outputCache.secondsSinceStateTransition,this.outputValue=this.outputCache.outputValue,this.valueOnTriggerChange=this.outputCache.valueOnTriggerChange,this.previousTriggerValue=t;for(let t=0;t<a.length;t++)a[t][e]=this.outputValue}return!0}})},function(e,t,s){"use strict";function a(e,t,s){t>32&&(t=32),t<1&&(t=1),"trve"===s&&(t=Math.floor(t));let a=2**t;"quantize-evenly"===s&&(a=Math.floor(a));const i=2/a,n=1-i;return e>=n?n:e<=-1?-1:Math.floor((1+e)/i)*i-1}s.r(t);const i=s(0).a;registerProcessor("bit-crusher-fixed-point",class extends AudioWorkletProcessor{static get parameterDescriptors(){return[{name:"bitDepth",defaultValue:8,minValue:1,maxValue:32,automationRate:"a-rate"}]}constructor(){super(),this.fractionalBitDepthMode="quantize-evenly",this.port.onmessage=this.handleMessage.bind(this)}handleMessage(e){e.data&&"change-fractional-bit-depth-mode"===e.data.type&&(this.fractionalBitDepthMode=e.data.newMode)}process(e,t,s){let n=e[0],r=t[0];this.getBitDepth=i(s.bitDepth,1,32);for(let e=0;e<n.length;e++){const t=n[e],s=r[e];for(let e=0;e<t.length;e++){const i=t[e];s[e]=a(i,this.getBitDepth(e),this.fractionalBitDepthMode)}}return!0}})},function(e,t,s){"use strict";s.r(t);const a={attack:1,high:2,release:3,low:4},i={tick:1,tock:0},n={reset:1,keepGoing:0};function r(e,{attackAfterTicks:t,releaseAfterTocks:s,ticksOnReset:r,tocksOnReset:o},g,u){return u===n.reset&&(e.stage=i.tock,e.tocksPast=o,e.ticksPast=r),g===a.attack&&e.stage===i.tock&&(e.ticksPast++,e.ticksPast>=t&&(e.stage=i.tick,e.ticksPast-=t)),g===a.release&&e.stage===i.tick&&(e.tocksPast++,e.tocksPast>=s&&(e.stage=i.tock,e.tocksPast-=s)),e}const o=s(0).a;registerProcessor("clock-divider",class extends AudioWorkletProcessor{static get parameterDescriptors(){return[{name:"clockTrigger",defaultValue:0,automationRate:"a-rate"},{name:"resetTrigger",defaultValue:0,automationRate:"a-rate"},{name:"attackAfterTicks",defaultValue:1,minValue:1,maxValue:1e9,automationRate:"a-rate"},{name:"releaseAfterTocks",defaultValue:1,minValue:1,maxValue:1e9,automationRate:"a-rate"},{name:"ticksOnReset",defaultValue:0,minValue:-1e9,maxValue:1e9,automationRate:"a-rate"},{name:"tocksOnReset",defaultValue:0,minValue:-1e9,maxValue:1e9,automationRate:"a-rate"}]}constructor(e){super(e),this.state={stage:i.tock,ticksPast:0,tocksPast:0},this.userParams={attackAfterTicks:0,releaseAfterTocks:0,ticksOnReset:0,tocksOnReset:0},this.initialReset=!0,this.port.onmessage=this.handleMessage.bind(this),this.manualClockTriggerOn=!1,this.manualResetTriggerOn=!1,this.clockTriggerOn=!1,this.resetTriggerOn=!1,this.clockTriggerChangeMessage={type:"clock-trigger-change",value:!1},this.resetTriggerChangeMessage={type:"reset-trigger-change",value:!1}}handleMessage(e){e.data&&"manual-clock-trigger"===e.data.type&&(this.manualClockTriggerOn=e.data.value),e.data&&"manual-reset-trigger"===e.data.type&&(this.manualResetTriggerOn=e.data.value)}process(e,t,s){const i=t[0];this.getClockTriggerValue=this.manualClockTriggerOn?()=>1e9:o(s.clockTrigger,-1e9,1e9),this.getResetTriggerValue=this.manualResetTriggerOn||this.initialReset?()=>(this.initialReset=!1,1e9):o(s.resetTrigger,-1e9,1e9),this.getAttackAfterTicks=o(s.attackAfterTicks,1,1e9),this.getReleaseAfterTocks=o(s.releaseAfterTocks,1,1e9),this.getTicksOnReset=o(s.ticksOnReset,-1e9,1e9),this.getTocksOnReset=o(s.tocksOnReset,-1e9,1e9);for(let e=0;e<i[0].length;e++){const t=this.getClockTriggerValue(e),s=this.getResetTriggerValue(e);let o;t>0?(this.clockTriggerOn?o=a.high:(o=a.attack,this.clockTriggerChangeMessage.value=!0,this.port.postMessage(this.clockTriggerChangeMessage)),this.clockTriggerOn=!0):(this.clockTriggerOn?(o=a.release,this.clockTriggerChangeMessage.value=!1,this.port.postMessage(this.clockTriggerChangeMessage)):o=a.low,this.clockTriggerOn=!1);let g=n.keepGoing;this.resetTriggerOn!==s>0&&(this.resetTriggerChangeMessage.value=s>0,this.port.postMessage(this.resetTriggerChangeMessage)),s>0&&!this.resetTriggerOn&&(g=n.reset),this.resetTriggerOn=s>0,this.userParams.attackAfterTicks=this.getAttackAfterTicks(e),this.userParams.releaseAfterTocks=this.getReleaseAfterTocks(e),this.userParams.ticksOnReset=this.getTicksOnReset(e),this.userParams.tocksOnReset=this.getTocksOnReset(e),r(this.state,this.userParams,o,g);for(let t=0;t<i.length;t++){i[t][e]=this.state.stage}}return!0}})}]);
//# sourceMappingURL=worklets.c1a03a0bce249e8928a9.js.map