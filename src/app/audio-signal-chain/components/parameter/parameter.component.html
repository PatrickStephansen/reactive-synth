<form [formGroup]="parameterForm">
  <label class="label">
    <div class="field">
      <span class="parameter-name">{{ parameter.name }}</span>
      <span class="units" *ngIf="parameter.units">
        ({{ parameter.units }})
      </span>
      <div class="control">
        <input
          [step]="parameter.stepSize"
          [min]="parameter.minValue"
          [max]="parameter.maxValue"
          type="number"
          [ngClass]="{ 'is-danger': parameterValue?.errors, input: true }"
          formControlName="parameterValue"
        />
        <div
          class="validation-errors has-text-danger"
          *ngIf="parameterValue.invalid"
        >
          must be a number between {{ parameter.minValue }} and
          {{ parameter.maxValue }}
        </div>
      </div>
      <div class="field">
        <div class="control is-expanded">
          <div class="select is-fullwidth">
            <select
              name="new-input"
              id="{{ parameter.moduleId }}-{{ parameter.name }}-new-input"
              formControlName="selectedSource"
              (change)="connectParameterToSource()"
            >
              <option value="" disabled selected hidden
                >Add Parameter Input</option
              >
              <option *ngIf="!availableSources?.length" value="" disabled
                >No more inputs available</option
              >
              <option
                *ngFor="let sourceModuleOutput of availableSources"
                value="{{ sourceModuleOutput.moduleId }}~{{ sourceModuleOutput.name }}"
              >
                {{ sourceModuleOutput.moduleId }}-{{ sourceModuleOutput.name }}
              </option>
            </select>
          </div>
        </div>
      </div>
    </div>
  </label>
</form>
<div class="tags" *ngIf="parameter.sources?.length">
  <ng-container *ngFor="let sourceModuleOutput of parameter.sources">
    <span class="tag"
      >{{ sourceModuleOutput.moduleId }}-{{ sourceModuleOutput.name }}
      <button
        class="delete is-small"
        type="button"
        (click)="disconnectParameterFromSource(sourceModuleOutput)"
      ></button
    ></span>
  </ng-container>
</div>
